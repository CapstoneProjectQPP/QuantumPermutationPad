{% extends 'base.html' %}

{% block title %} QPP Research {% endblock %}
{% block header %} Interactive Research {% endblock %}

{% block header_content %} 
  <p> This page allows users to interact with the embedded system with textual input
  which will be Encrypted and Decrypted in QPP. Just hit the Submit button to send the message</p>
    <script type="text/javascript">

    function EncryptShow() {
        if (document.getElementById('encrypt_show').checked) {
            document.getElementById('ifEncrypt').style.display = 'block';
        } else {
            document.getElementById('ifEncrypt').style.display= 'none';
        }
    }

    function DecryptShow() {
        if (document.getElementById('decrypt_show').checked) {
            document.getElementById('ifDecrypt').style.display = 'block';
        } else {
            document.getElementById('ifDecrypt').style.display= 'none';
        }
    }

    function CheckBoxChecK(){
      EncryptShow();
      DecryptShow();
    }

</script>
{% endblock %}

{% block content %}
<script type="text/javascript" defer> window.load = CheckBoxChecK() </script>

<div> Encrypt <input type="checkbox"
                     onclick="javascript:EncryptShow();"
                     name="encrypt_show" id="encrypt_show" checked="{{ encrypt_select }}" /></div>

<div> Decrypt <input type="checkbox" 
                     onclick="javascript:DecryptShow();"
                     name="decrypt_show" id="decrypt_show" checked="{{ decrypt_select }}" /></div>
<br>
<div style="display:flex">
  <div id="ifEncrypt" style="display:none">
    <form method="POST" action="{{ url_for('enc_research') }}">
      <div> <h2>UTF-8 User Input</h2>
        <textarea style="resize:none" name=user_input_enc rows="4" cols="50" required></textarea>
      </div>
      <div id="submit_button_enc" >
        <button  class="button" type="submit"> Submit </button>
      </div>
    </form>
    <form method="GET">
      <div> <h2>Encrypted CipherText</h2>
          {% for cipher in ciphertext %} 
              <p style="resize:none" rows="4" cols="10"> {{ cipher }} </p>
          {% endfor %}
      </div>
    </form>
      <div><br></br>
          <p>Encrypt Time:
          <span style="resize:none" rows="1" cols="10">{{ encrypt_time }} </span>(s)
          </p>
      </div>
  </div>

  <div id="ifDecrypt" style="display:none">
    <form method="POST" action="{{ url_for('dec_research') }}">
        <div> <h2>Hexadecimal Encrypted User Input</h2>
            <textarea style="resize:none" name=user_input_dec rows="4" cols="50" required></textarea>
        </div>
        <div id="submit_button_dec">
          <button  class="button" type="submit"> Submit </button>
        <div>
      </form>
      <form method="GET">
        <div> <h2>Decrypted PlainText</h2>
            {% for plain in plaintext %}
                <p style="resize:none" rows="4" cols="10"> {{ plain }} </p>
            {% endfor %}
        </div>
      </form>
      <div>
          <p>
          <label>Decrypt Time: </label>
          <span style="resize:none" rows="1" cols="10"> {{ decrypt_time }} </span>(s)
          </p>
      </div>
  </div>
<div>
{% endblock %}
